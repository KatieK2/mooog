<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="/examples/scratch/js/jquery.min.js"></script>
    <style>
        .square-button{
            height:250px;
            width:250px;
            display:inline-block;
            border:thin solid #CCC;
            background: #DDD;
            float:left;
            margin:3px;
        }
    </style>
    <title></title>
  </head>

  <body>
        <script src="/dist/mooog.js"></script>
        <div class="welcome">
          <h1>ADSR on a tone</h1>




        </div><!-- .welcome -->






<button class="square-button tone-button scale1" >scale 1</button>
<!--
<button class="square-button tone-button fak" >Fake Saw</button>
<button class="square-button tone-button sin" >Sin</button>
<button class="square-button tone-button fs" >Fake Sin</button>
-->





<script>



(function(){
    M = new Mooog({debug:true});
    var sin = M.node('sin','Oscillator').param('type','triangle');




    sin.chain( M.node('adsr_gain','Gain') )
    .chain( M.node('out_gain','Gain') ).param('gain',0.4)

    M.node('out_gain')
      .chain( M.node('fil','BiquadFilter') )
      .connect( M.node({ id:"cv",node_type:"Convolver", buffer_source_file:"/src/impulse-responses/st-andrews-church-ortf-shaped.wav" }) )
      .chain( M.node('sp','StereoPanner') )


    window.ad = M.node('adsr_gain');



    $(document)
    .on('mousedown','.scale1',function(){
//         M.node('adsr_gain').adsr( M.node('adsr_gain').gain , { base: 0, a: 1, s: 0.5, times: [ 0.1, 0.1, 1, 0.5 ] });
        M.node('fil').adsr( M.node('fil').frequency , { base: 0, a: 24000, times: [ 0.1, 0, 5 ] });
        sin.start();
    })
    .on('mouseup','.scale1',function(){
        sin.stop();
    })

})(window)




  </script>
  </body>
</html>
