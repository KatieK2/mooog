<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
        <script src="/examples/scratch/js/jquery.min.js"></script>
    <style>
        .square-button{
            height:250px;
            width:250px;
            display:inline-block;
            border:thin solid #CCC;
            background: #DDD;
            float:left;
            margin:3px;
        }
    </style>
    <title></title>
  </head>

  <body>
        <script src="/dist/mooog.js"></script>
        <div class="welcome">
          <h1>Waveform test: Oscillator base types are not normalized</h1>




        </div><!-- .welcome -->



<button class="square-button tone-button" data-osc="saw" >Saw</button>
<button class="square-button tone-button" data-osc="fsaw" >Fake Saw</button>
<button class="square-button tone-button" data-osc="sin" >Sin</button>
<button class="square-button tone-button" data-osc="fsin" >Fake Sin</button>
<button class="square-button tone-button" data-osc="sq" >Square</button>
<button class="square-button tone-button" data-osc="fsq" >Fake Sq</button>
<button class="square-button tone-button" data-osc="tri" >Triangle</button>
<button class="square-button tone-button" data-osc="ftri" >Fake Tri</button>




<script>



(function(){

  sawtooth = function(harms){
    var a = [0];
    for(i=1;i<harms;i += 1){
      a.push(1/i);
    }
    var real = new Float32Array(a);
    var imag = new Float32Array(real.length);
    return M.context.createPeriodicWave(real, imag);
  }

  square = function(harms){
    var a = [0];
    for(i=1;i<harms;i += 1){
      if( i%2 != 0 ){
        a.push(2/(Math.PI * i));
      }else{
        a.push(0);
      }
    }
    var real = new Float32Array(a);
    var imag = new Float32Array(real.length);
    return M.context.createPeriodicWave(real, imag);
  }

  triangle = function(harms){
    var a = [0];
    for(i=1;i<harms;i += 1){
      if( i%2 != 0 ){
        a.push(1/(Math.pow(i,2)));
      }else{
        a.push(0);
      }
    }
    var real = new Float32Array(a);
    var imag = new Float32Array(real.length);
    return M.context.createPeriodicWave(real, imag);
  }

  sine = function(harms){
    var a = [0, 1];
    var real = new Float32Array(a);
    var imag = new Float32Array(real.length);
    return M.context.createPeriodicWave(real, imag);
  }


    M = new Mooog({debug:true});

    gain1 = M.node('gain1','Gain').param('gain',0.6);
    gain2 = M.node('gain2','Gain').param('gain',1);

    saw = M.node('saw','Oscillator');
    fsaw = M.node('fsaw','Oscillator');
    sin = M.node('sin','Oscillator');
    fsin = M.node('fsin','Oscillator');
    sq = M.node('sq','Oscillator');
    fsq = M.node('fsq','Oscillator');
    tri = M.node('tri','Oscillator');
    ftri = M.node('ftri','Oscillator');

    saw.chain(gain1);
    fsaw.chain(gain2);
    sin.chain(gain1);
    fsin.chain(gain2);
    sq.chain(gain1);
    fsq.chain(gain2);
    tri.chain(gain1);
    ftri.chain(gain2);



    saw.param('type','sawtooth');
    sin.param('type','sine');
    sq.param('type','square');
    tri.param('type','triangle');


    fsaw.setPeriodicWave(sawtooth(2048));
    fsq.setPeriodicWave(square(2048));
    fsin.setPeriodicWave(sine(2048));
    ftri.setPeriodicWave(triangle(2048));



    $(document)
    .on('mousedown','.tone-button',function(){
        M.node( $(this).data('osc') ).start()
    })
    .on('mouseup','.tone-button',function(){
        M.node( $(this).data('osc') ).stop()
    })


})(window)




  </script>
  </body>
</html>
