<!DOCTYPE html>

<html>
<head>
  <title>Mooog</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          
          <h1 id="mooog">Mooog</h1>
<blockquote>
<p>Chainable AudioNode objects</p>
</blockquote>
<h3 id="what-is-mooog-">What is Mooog?</h3>
<p>Mooog is inspired by audio mixing boards on the one hand and jQuery chainable
syntax on the other. It automatically does a lot of stuff so you don’t have to.
Mooog’s goal is to take some of the tedium work out of working with AudioNodes,
as well as patching some odd behaviors. </p>
<h3 id="what-mooog-isn-t">What Mooog isn’t</h3>
<p>Mooog is not a shim for the deprecated Audio API. It also doesn’t (yet) worry
about cross-platform issues. It is developed and tested on the latest version
of Google Chrome, and expects to run there. Ensuring cross-platform
consistency is on the to-do list once the API stabilizes. </p>
<h3 id="features">Features</h3>
<p>Mooog provides nestable <code>Node</code> objects that wrap AudioNodes. At a minumum, they
expose the methods of the wrapped Node, so you can talk to them just like the
underlying AudioNode. Manye of them offer additional functionality</p>
<p>There is also a specialized Node object called <code>Track</code>, which will automatically
create a panner and a gain module that can be controlled from a single place, as
well as effect sends. It automatically routes the end of its internal chain
to the destinationNode.</p>
<h3 id="attributions">Attributions</h3>
<p>The Convolver <code>Node</code> comes with some presets that make use of impulse responses
from the <a href="http://www.openairlib.net/">OpenAir</a> project:</p>
<ul>
<li><em>stalbans_a_binaural.wav</em><br>The Lady Chapel, St Albans Cathedral: 
<a href="http://creativecommons.org/licenses/by-sa/3.0/">CC share/share alike license</a><ul>
<li>www.openairlib.net</li>
<li>Audiolab, University of York</li>
<li>Marcin Gorzel</li>
<li>Gavin Kearney</li>
<li>Aglaia Foteinou</li>
<li>Sorrel Hoare</li>
<li>Simon Shelley</li>
</ul>
</li>
</ul>
<h2 id="node">Node</h2>
<p>Base class for all the node wrappers. </p>
<p>The Mooog Node object wraps one or more AudioNode objects. By default it 
exposes the <code>AudioNode</code> methods of the first AudioNode in the <code>_nodes</code>
array. </p>
<p>Signatures:</p>
<blockquote>
<p>Node(instance:Mooog , id:string, node_def:mixed)</p>
</blockquote>
<p><code>_instance</code>: The parent <code>Mooog</code> instance<br><code>id</code>: A unique identifier to assign to this Node
<code>node_def</code>: Either a string representing the type of Node to initialize
or an object with initialization params (see below) </p>
<blockquote>
<p>Node(instance:Mooog , node_definition:object [, node_definition…])</p>
</blockquote>
<p><code>_instance</code>: The parent <code>Mooog</code> instance<br><code>node_definition</code>: An object used to create and configure the new Node. </p>
<p>Required properties:</p>
<ul>
<li><code>id</code>: Unique string identifier</li>
<li><code>node_type</code>: String indicating the type of Node (Oscillator, Gain, etc.)</li>
</ul>
<p>Optional properties</p>
<ul>
<li><code>connect_to_destination</code>: Boolean indicating whether the last in this node’s 
<code>_nodes</code> array is automatically connected to the <code>AudioDestinationNode</code>. <em>default: true</em></li>
</ul>

          
            <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(<span class="hljs-property">@_instance</span>, node_list...)</span> -&gt;</span>
    <span class="hljs-property">@_destination</span> = <span class="hljs-property">@_instance</span>._destination
    <span class="hljs-property">@context</span> = <span class="hljs-property">@_instance</span>.context
    <span class="hljs-property">@_nodes</span> = []
    <span class="hljs-property">@config_defaults</span> =
      <span class="hljs-attribute">connect_to_destination</span>: <span class="hljs-literal">true</span>
    <span class="hljs-property">@debug</span> <span class="hljs-string">"node_list:"</span>, node_list
    <span class="hljs-property">@debug</span> <span class="hljs-string">"constr:"</span>, <span class="hljs-property">@constructor</span>.name</pre></div>
          
        

        
      </div>

      
        
        <p>Take care of first type signature (ID and string type)</p>

        
          <div class='highlight'><pre>    <span class="hljs-keyword">if</span> <span class="hljs-property">@__typeof</span>(node_list[<span class="hljs-number">0</span>]) <span class="hljs-keyword">is</span> <span class="hljs-string">"string"</span> \
    <span class="hljs-keyword">and</span> <span class="hljs-property">@__typeof</span>(node_list[<span class="hljs-number">1</span>]) <span class="hljs-keyword">is</span> <span class="hljs-string">"string"</span> \
    <span class="hljs-keyword">and</span> Mooog.LEGAL_NODES[node_list[<span class="hljs-number">1</span>]]?
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Mooog.LEGAL_NODES[node_list[<span class="hljs-number">1</span>]] <span class="hljs-property">@_instance</span>, { <span class="hljs-attribute">id</span>: node_list[<span class="hljs-number">0</span>] }</pre></div>
        
      
        
        <p>Otherwise, this is one or more config objects.</p>

        
          <div class='highlight'><pre>    <span class="hljs-keyword">if</span> node_list.length <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">unless</span> <span class="hljs-property">@constructor</span>.name <span class="hljs-keyword">is</span> <span class="hljs-string">"Node"</span>
      <span class="hljs-keyword">if</span> Mooog.LEGAL_NODES[node_list[<span class="hljs-number">0</span>].node_type]?
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Mooog.LEGAL_NODES[node_list[<span class="hljs-number">0</span>].node_type] <span class="hljs-property">@_instance</span>, node_list[<span class="hljs-number">0</span>]
      <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">"Omitted or undefined node type in config options."</span>)
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> node_list
        <span class="hljs-keyword">if</span> Mooog.LEGAL_NODES[node_list[i].node_type?]
          <span class="hljs-property">@_nodes</span>.push <span class="hljs-keyword">new</span> Mooog.LEGAL_NODES[node_list[i].node_type] <span class="hljs-property">@_instance</span>, node_list[i]
        <span class="hljs-keyword">else</span>
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">"Omitted or undefined node type in config options."</span>)</pre></div>
        
      
        
        <p>Enforce the required config properties here, and set others as necessary.</p>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">configure_from</span>: <span class="hljs-function"><span class="hljs-params">(ob)</span> -&gt;</span>
    <span class="hljs-property">@debug</span> <span class="hljs-string">"config from"</span>, ob
    <span class="hljs-property">@id</span> = <span class="hljs-keyword">if</span> ob.id? <span class="hljs-keyword">then</span> ob.id <span class="hljs-keyword">else</span> <span class="hljs-property">@new_id</span>()
    <span class="hljs-property">@debug</span> <span class="hljs-property">@id</span>
    <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">of</span> <span class="hljs-property">@config_defaults</span>
      ob[k] ?= <span class="hljs-property">@config_defaults</span>[k]
    <span class="hljs-property">@config</span> = ob</pre></div>
        
      
        
        <h3 id="node-tostring">Node.toString</h3>
<p>Includes the ID in the string representation of the object.      </p>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">toString</span>: <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
    <span class="hljs-string">"<span class="hljs-subst">#{@.constructor.name}</span>#"</span>+<span class="hljs-property">@id</span></pre></div>
        
      
        
        <h3 id="node-new_id">Node.new_id</h3>
<p>Generates a new string identifier for this node.</p>

        
          <div class='highlight'><pre>  
  <span class="hljs-attribute">new_id</span>: <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
    <span class="hljs-string">"<span class="hljs-subst">#{@.constructor.name}</span>_<span class="hljs-subst">#{Math.round(Math.random()*<span class="hljs-number">100000</span>)}</span>"</span></pre></div>
        
      
        
        <h3 id="node-__typeof">Node.__typeof</h3>
<p>This is a modified <code>typeof</code> to filter AudioContext API-specific object types</p>

        
          <div class='highlight'><pre>  
  <span class="hljs-attribute">__typeof</span>: <span class="hljs-function"><span class="hljs-params">(thing)</span> -&gt;</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"AudioParam"</span> <span class="hljs-keyword">if</span> thing <span class="hljs-keyword">instanceof</span> AudioParam
    <span class="hljs-keyword">return</span> <span class="hljs-string">"AudioNode"</span> <span class="hljs-keyword">if</span> thing <span class="hljs-keyword">instanceof</span> AudioNode
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Node"</span> <span class="hljs-keyword">if</span> thing <span class="hljs-keyword">instanceof</span> Node
    <span class="hljs-keyword">switch</span> <span class="hljs-keyword">typeof</span>(thing)
      <span class="hljs-keyword">when</span> <span class="hljs-string">"string"</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"string"</span>
      <span class="hljs-keyword">when</span> <span class="hljs-string">"number"</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"number"</span>
      <span class="hljs-keyword">when</span> <span class="hljs-string">"function"</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"function"</span>
      <span class="hljs-keyword">when</span> <span class="hljs-string">"object"</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"object"</span>
      <span class="hljs-keyword">when</span> <span class="hljs-string">"undefined"</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"undefined"</span>
      <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"__typeof does not pass for "</span> + <span class="hljs-keyword">typeof</span>(thing)</pre></div>
        
      
        
        <h3 id="node-insert_node">Node.insert_node</h3>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">insert_node</span>: <span class="hljs-function"><span class="hljs-params">(node, ord)</span> -&gt;</span>
    length = <span class="hljs-property">@_nodes</span>.length
    ord = length <span class="hljs-keyword">unless</span> ord?
            
    <span class="hljs-keyword">if</span> ord &gt; length
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">"Invalid index given to insert_node: "</span> + ord +
      <span class="hljs-string">" out of "</span> + length)
    <span class="hljs-property">@debug</span> <span class="hljs-string">"insert_node of <span class="hljs-subst">#{@}</span> for"</span>, node, ord

    <span class="hljs-keyword">if</span> ord <span class="hljs-keyword">is</span> <span class="hljs-number">0</span>
     
      <span class="hljs-property">@connect_incoming</span> node
      <span class="hljs-property">@disconnect_incoming</span> <span class="hljs-property">@_nodes</span>[<span class="hljs-number">0</span>]

      <span class="hljs-keyword">if</span> length &gt; <span class="hljs-number">1</span>
        node.connect <span class="hljs-property">@to</span> <span class="hljs-property">@_nodes</span>[<span class="hljs-number">0</span>]
        <span class="hljs-property">@debug</span> <span class="hljs-string">'- node.connect to '</span>, <span class="hljs-property">@_nodes</span>[<span class="hljs-number">0</span>]

    <span class="hljs-keyword">if</span> ord <span class="hljs-keyword">is</span> length
      <span class="hljs-property">@safely_disconnect</span> <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>], (<span class="hljs-property">@from</span> <span class="hljs-property">@_destination</span>) <span class="hljs-keyword">if</span> ord <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span>
      <span class="hljs-property">@debug</span>(<span class="hljs-string">"- disconnect "</span>, <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>], <span class="hljs-string">'from'</span>, <span class="hljs-property">@_destination</span>) <span class="hljs-keyword">if</span> ord <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span>
      
      <span class="hljs-keyword">if</span> <span class="hljs-property">@config</span>.connect_to_destination
        node.connect <span class="hljs-property">@to</span> <span class="hljs-property">@_destination</span>
        <span class="hljs-property">@debug</span> <span class="hljs-string">'- connect'</span>, node, <span class="hljs-string">'to'</span>, <span class="hljs-property">@_destination</span>
      
      <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>].connect <span class="hljs-property">@to</span> node <span class="hljs-keyword">if</span> ord <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span>
      <span class="hljs-property">@debug</span> <span class="hljs-string">'- connect'</span>, <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>], <span class="hljs-string">"to"</span>, node <span class="hljs-keyword">if</span> ord <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span>

    <span class="hljs-keyword">if</span> ord <span class="hljs-keyword">isnt</span> length <span class="hljs-keyword">and</span> ord <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span>
      <span class="hljs-property">@safely_disconnect</span> <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>], (<span class="hljs-property">@from</span> <span class="hljs-property">@_nodes</span>[ord])
      <span class="hljs-property">@debug</span> <span class="hljs-string">"- disconnect"</span>, <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>], <span class="hljs-string">"from"</span>, <span class="hljs-property">@_nodes</span>[ord]
      <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>].connect <span class="hljs-property">@to</span> node
      <span class="hljs-property">@debug</span> <span class="hljs-string">"- connect"</span>, <span class="hljs-property">@_nodes</span>[ord - <span class="hljs-number">1</span>], <span class="hljs-string">"to"</span>, node
      node.connect <span class="hljs-property">@to</span> <span class="hljs-property">@_nodes</span>[ord]
      <span class="hljs-property">@debug</span> <span class="hljs-string">"- connect"</span>, node, <span class="hljs-string">"to"</span>, <span class="hljs-property">@_nodes</span>[ord]
    
    <span class="hljs-property">@_nodes</span>.splice ord, <span class="hljs-number">0</span>, node
    <span class="hljs-property">@debug</span> <span class="hljs-string">"- spliced:"</span>, <span class="hljs-property">@_nodes</span>


    
      

  <span class="hljs-attribute">connect_incoming</span>: <span class="hljs-function">-&gt;</span></pre></div>
        
      
        
        <p>@debug ‘do incoming’
todo: deal with incoming connections for 0 element</p>

        
          <div class='highlight'><pre>
  <span class="hljs-attribute">disconnect_incoming</span>: <span class="hljs-function">-&gt;</span></pre></div>
        
      
        
        <p>@debug ‘undo incoming’
todo: deal with incoming connections for 0 element</p>

        
      
        
        <h3 id="node-connect">Node.connect</h3>
<p>We track all connections to and from the underlying <code>@base_node</code> by exposing
modified connect and disconnect methods. 
<code>node</code>: The node object or string ID of the object to which to connect.
<code>param</code>: Optional string name of the <code>AudioParam</code> member of <code>node</code>to
which to connect.
<code>output</code>: Optional integer representing the output of this Node to use.
<code>input</code>: If <code>param</code> is not specified (you are connecting to an <code>AudioNode</code>)
then this integer argument can be used to specify the input of the target
to connect to.</p>
<pre><code>  <span class="hljs-comment">#todo: Figure out how/whether to deal with params </span>
</code></pre>
        
          <div class='highlight'><pre>  <span class="hljs-attribute">connect</span>: <span class="hljs-function"><span class="hljs-params">(node, output = <span class="hljs-number">0</span>, input = <span class="hljs-number">0</span>)</span> -&gt;</span>
    <span class="hljs-property">@debug</span> <span class="hljs-string">"called connect from <span class="hljs-subst">#{@}</span> to <span class="hljs-subst">#{node}</span>"</span>
    
    <span class="hljs-keyword">switch</span> <span class="hljs-property">@__typeof</span> node
      <span class="hljs-keyword">when</span> <span class="hljs-string">"Node"</span>
        target = node._nodes[<span class="hljs-number">0</span>]
        <span class="hljs-property">@_nodes</span>[ <span class="hljs-property">@_nodes</span>.length - <span class="hljs-number">1</span> ].connect target, output, input
      <span class="hljs-keyword">when</span> <span class="hljs-string">"AudioNode"</span>
        target = node
        <span class="hljs-property">@_nodes</span>[ <span class="hljs-property">@_nodes</span>.length - <span class="hljs-number">1</span> ].connect target, output, input
      <span class="hljs-keyword">when</span> <span class="hljs-string">"AudioParam"</span>
        target = node
        <span class="hljs-property">@_nodes</span>[ <span class="hljs-property">@_nodes</span>.length - <span class="hljs-number">1</span> ].connect target, output
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Unknown node type passed to connect"</span></pre></div>
        
      
        
        <p>todo: deal with params
@_outgoing.push [node, param, output, input]
node.receive_connect @, param, output, input if node.receive_connect?
@connect_base_node node, param, output, input</p>

        
          <div class='highlight'><pre>  
  
  <span class="hljs-attribute">to</span>: <span class="hljs-function"><span class="hljs-params">(node)</span> -&gt;</span>
    <span class="hljs-keyword">switch</span> <span class="hljs-property">@__typeof</span> node
      <span class="hljs-keyword">when</span> <span class="hljs-string">"Node"</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> node._nodes[<span class="hljs-number">0</span>]
      <span class="hljs-keyword">when</span> <span class="hljs-string">"AudioNode"</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> node
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Unknown node type passed to connect"</span>
  
  <span class="hljs-attribute">from</span>: @.prototype.to
  
  
  <span class="hljs-attribute">expose_methods_of</span>: <span class="hljs-function"><span class="hljs-params">(node)</span> -&gt;</span>
    <span class="hljs-property">@debug</span> <span class="hljs-string">"exposing"</span>, node
    <span class="hljs-keyword">for</span> key,val <span class="hljs-keyword">of</span> node
      <span class="hljs-keyword">if</span> @[key]? <span class="hljs-keyword">then</span> <span class="hljs-keyword">continue</span></pre></div>
        
      
        
        <p>@debug “- checking”, @__typeof val</p>

        
          <div class='highlight'><pre>      <span class="hljs-keyword">switch</span> <span class="hljs-property">@__typeof</span> val
        <span class="hljs-keyword">when</span> <span class="hljs-string">'function'</span>
          @[key] = val.bind node
        <span class="hljs-keyword">when</span> <span class="hljs-string">'AudioParam'</span>
          @[key] = val
        <span class="hljs-keyword">when</span> <span class="hljs-string">"string"</span>, <span class="hljs-string">"number"</span>
          (<span class="hljs-function"><span class="hljs-params">(o, node, key)</span> -&gt;</span>
            Object.defineProperty o, key, {
              <span class="hljs-attribute">get</span>: <span class="hljs-function">-&gt;</span>
                node[key]
              <span class="hljs-attribute">set</span>: <span class="hljs-function"><span class="hljs-params">(val)</span> -&gt;</span>
                node[key] = val
              <span class="hljs-attribute">enumerable</span>: <span class="hljs-literal">true</span>
              <span class="hljs-attribute">configurable</span>: <span class="hljs-literal">true</span>
            })(@, node, key)</pre></div>
        
      
        
        <h3 id="node-safely_disconnect">Node.safely_disconnect</h3>
<p>Prevents <code>InvalidAccessError</code>s from stopping program execution if you try to use disconnect on 
a node that’s not already connected.</p>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">safely_disconnect</span>: <span class="hljs-function"><span class="hljs-params">(node1, node2, output = <span class="hljs-number">0</span>, input = <span class="hljs-number">0</span>)</span> -&gt;</span>
    <span class="hljs-keyword">switch</span> <span class="hljs-property">@__typeof</span> node1
      <span class="hljs-keyword">when</span> <span class="hljs-string">"Node"</span> <span class="hljs-keyword">then</span> source = node1._nodes[ source._nodes.length - <span class="hljs-number">1</span> ]
      <span class="hljs-keyword">when</span> <span class="hljs-string">"AudioNode"</span>, <span class="hljs-string">"AudioParam"</span> <span class="hljs-keyword">then</span> source = node1
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Unknown node type passed to connect"</span>
    <span class="hljs-keyword">switch</span> <span class="hljs-property">@__typeof</span> node2
      <span class="hljs-keyword">when</span> <span class="hljs-string">"Node"</span> <span class="hljs-keyword">then</span> target = node2._nodes[<span class="hljs-number">0</span>]
      <span class="hljs-keyword">when</span> <span class="hljs-string">"AudioNode"</span>, <span class="hljs-string">"AudioParam"</span> <span class="hljs-keyword">then</span> target = node2
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Unknown node type passed to connect"</span>
    <span class="hljs-keyword">try</span>
      source.disconnect target, output, input
    <span class="hljs-keyword">catch</span> e
      <span class="hljs-property">@debug</span>(<span class="hljs-string">"ignored InvalidAccessError disconnecting <span class="hljs-subst">#{target}</span> from <span class="hljs-subst">#{source}</span>"</span>)</pre></div>
        
      
        
        <h3 id="node-disconnect">Node.disconnect</h3>
<p>Replace the native <code>disconnect</code> function with a safe version, in case it is called directly.</p>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">disconnect</span>: <span class="hljs-function"><span class="hljs-params">(node, output = <span class="hljs-number">0</span>, input = <span class="hljs-number">0</span>)</span> -&gt;</span>
    <span class="hljs-property">@safely_disconnect</span> @, node, output, input</pre></div>
        
      
        
        <h3 id="node-debug">Node.debug</h3>
<p>Logs to the console if the debug config option is on</p>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">debug</span>: <span class="hljs-function"><span class="hljs-params">(a...)</span> -&gt;</span>
    <span class="hljs-built_in">console</span>.log(a...) <span class="hljs-keyword">if</span> <span class="hljs-property">@_instance</span>.config.debug</pre></div>
        
      
        
        <h2 id="gain">Gain</h2>
<p>Wraps the GainNode AudioContext object</p>

        
          <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Gain</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Node</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(<span class="hljs-property">@_instance</span>, config = {})</span> -&gt;</span>
    config.node_type = <span class="hljs-string">'Gain'</span>
    <span class="hljs-keyword">super</span>
    <span class="hljs-property">@configure_from</span>(config)
    <span class="hljs-property">@insert_node</span> <span class="hljs-property">@context</span>.createGain(), <span class="hljs-number">0</span>
    <span class="hljs-property">@expose_methods_of</span> <span class="hljs-property">@_nodes</span>[<span class="hljs-number">0</span>]</pre></div>
        
      
        
        <h2 id="oscillator">Oscillator</h2>
<p>Wraps the OscillatorNode AudioContext object</p>

        
          <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Oscillator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Node</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(<span class="hljs-property">@_instance</span>, config = {})</span> -&gt;</span>
    config.node_type = <span class="hljs-string">'Oscillator'</span>
    <span class="hljs-keyword">super</span>
    <span class="hljs-property">@configure_from</span>(config)
    <span class="hljs-property">@insert_node</span> <span class="hljs-property">@context</span>.createOscillator(), <span class="hljs-number">0</span></pre></div>
        
      
        
        <p>@insert_node @context.createGain(), 1</p>

        
          <div class='highlight'><pre>    <span class="hljs-property">@insert_node</span> <span class="hljs-keyword">new</span> Gain( <span class="hljs-property">@_instance</span>, { <span class="hljs-attribute">connect_to_destination</span>: config.connect_to_destination } )
    <span class="hljs-property">@_is_started</span> = <span class="hljs-literal">false</span>
    <span class="hljs-property">@expose_methods_of</span> <span class="hljs-property">@_nodes</span>[<span class="hljs-number">0</span>]

  
  <span class="hljs-attribute">start</span>: <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
    <span class="hljs-keyword">if</span> <span class="hljs-property">@_is_started</span>
      <span class="hljs-property">@_nodes</span>[<span class="hljs-number">1</span>].gain.value = <span class="hljs-number">1.0</span>
    <span class="hljs-keyword">else</span>
      <span class="hljs-property">@_nodes</span>[<span class="hljs-number">0</span>].start()
      <span class="hljs-property">@_is_started</span> = <span class="hljs-literal">true</span>
  
  <span class="hljs-attribute">stop</span>: <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
    <span class="hljs-property">@_nodes</span>[<span class="hljs-number">1</span>].gain.value = <span class="hljs-number">0</span></pre></div>
        
      
        
        <h2 id="stereopanner">StereoPanner</h2>
<p>Wraps the StereoPannerNode AudioContext object</p>

        
          <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StereoPanner</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Node</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(<span class="hljs-property">@_instance</span>, config = {})</span> -&gt;</span>
    config.node_type = <span class="hljs-string">'StereoPanner'</span>
    <span class="hljs-keyword">super</span>
    <span class="hljs-property">@configure_from</span>(config)</pre></div>
        
      
        
        <h2 id="mooog">Mooog</h2>
<p>Wraps the AudioContext object and exposes the Track object. Exposes the API
as the Mooog global</p>

        
          <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mooog</span></span>

  <span class="hljs-property">@LEGAL_NODES</span>:
    <span class="hljs-string">'Oscillator'</span>: Oscillator
    <span class="hljs-string">'StereoPanner'</span>: StereoPanner
    <span class="hljs-string">'Gain'</span>: Gain

  
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(<span class="hljs-property">@initConfig</span> = {})</span> -&gt;</span></pre></div>
        
      
        
        <p><code>_BROWSER_CONSTRUCTOR</code> Stores the type of constructor used for the AudioContext 
object (<code>AudioContext</code> or <code>webkitAudioContext</code>)</p>

        
          <div class='highlight'><pre>    <span class="hljs-property">@_BROWSER_CONSTRUCTOR</span> = <span class="hljs-literal">false</span>
    <span class="hljs-property">@context</span> = <span class="hljs-property">@create_context</span>()
    <span class="hljs-property">@_destination</span> = <span class="hljs-property">@context</span>.destination
    <span class="hljs-property">@config</span> =
      <span class="hljs-attribute">debug</span>: <span class="hljs-literal">false</span>
    
    <span class="hljs-property">@init</span>(<span class="hljs-property">@initConfig</span>)

    <span class="hljs-property">@_nodes</span> = {}</pre></div>
        
      
        
        <p>@_connections = {}
@_node_id_count = 1</p>

        
          <div class='highlight'><pre>

  <span class="hljs-attribute">init</span>: <span class="hljs-function"><span class="hljs-params">(initConfig)</span> -&gt;</span>
    <span class="hljs-keyword">for</span> key, val <span class="hljs-keyword">of</span> <span class="hljs-property">@config</span>
      <span class="hljs-keyword">if</span> initConfig[key]?
        <span class="hljs-property">@config</span>[key] = initConfig[key]


  <span class="hljs-attribute">create_context</span>: <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.AudioContext?)
      <span class="hljs-property">@_BROWSER_CONSTRUCTOR</span> = <span class="hljs-string">'AudioContext'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AudioContext()
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.webkitAudioContext?)
      <span class="hljs-property">@_BROWSER_CONSTRUCTOR</span> = <span class="hljs-string">'webkitAudioContext'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> webkitAudioContext()
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">"This browser does not yet support the AudioContext API"</span>)</pre></div>
        
      
        
        <p>The track object holds a chain of AudioNodes. By default it includes panner
and gain stages.</p>
<p>track: (id, params) -&gt;
 return @_tracks[id] if @_tracks?[id]?
 @_tracks[id] = new Track(id, this, params)</p>

        
          <div class='highlight'><pre>

    
  <span class="hljs-attribute">node</span>: <span class="hljs-function"><span class="hljs-params">(id, node_list...)</span> -&gt;</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> id <span class="hljs-keyword">is</span> <span class="hljs-string">'string'</span>
      <span class="hljs-keyword">if</span> node_list.length
        <span class="hljs-property">@_nodes</span>[id] = <span class="hljs-keyword">new</span> Node(<span class="hljs-keyword">this</span>, id, node_list...)
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-property">@_nodes</span>?[id]?
        <span class="hljs-keyword">return</span> <span class="hljs-property">@_nodes</span>[id]
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">"No node found with id <span class="hljs-subst">#{id}</span>"</span>)
    <span class="hljs-keyword">else</span>
      node = <span class="hljs-keyword">new</span> Node(<span class="hljs-keyword">this</span>, [id].concat(node_list...)...)
      <span class="hljs-property">@_nodes</span>[node.id] = node</pre></div>
        
      
        
        <p>create_connection: (from, to) -&gt;
 @_connections[from]?[to] = true</p>
<p>delete_connection: (from, to) -&gt;
 delete @_connections[from]?[to]</p>
<p>next_node_id: -&gt;
 @_node_id_count += 1
 “_node” + @_node_id_count</p>

        
          <div class='highlight'><pre>
    

<span class="hljs-built_in">window</span>.Mooog = Mooog</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
